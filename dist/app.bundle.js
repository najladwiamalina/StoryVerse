/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{checkAuthenticatedRoute:()=>N,checkUnauthenticatedRouteOnly:()=>T,getAccessToken:()=>O,isLoggedIn:()=>E,logout:()=>G,putAccessToken:()=>j,removeAccessToken:()=>P});const e={BASE_URL:"https://story-api.dicoding.dev/v1",DEFAULT_LANGUAGE:"en-US",CACHE_NAME:"StoryApp-V1",DATABASE_NAME:"story-app-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"stories",VAPID_PUBLIC_KEY:"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk",ACCESS_TOKEN_KEY:"access_token"};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=i.call(e)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,n)||a(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=a(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw i}}}}function a(t,n){if(t){if("string"==typeof t)return u(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function c(){var t=v(),n=t.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,s(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(c=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new d(t,n)},AsyncIterator:y,async:function(t,n,e,o,a){return(r(n)?p:l)(i(t),n,e,o,a)},keys:f,values:s}})()}function s(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function f(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function l(t,n,e,r,o){var i=p(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function p(t,n,e,r,o){return new y(v().w(t,n,e,r),o||Promise)}function y(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof d?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(h(y.prototype),h(y.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),h(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function v(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return h(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(h(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,h(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,h(l,"constructor",s),h(s,"constructor",c),c.displayName="GeneratorFunction",h(s,o,"GeneratorFunction"),h(l),h(l,o,"Generator"),h(l,r,(function(){return this})),h(l,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:i,m:p}})()}function h(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}h=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){h(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},h(t,n,e,r)}function d(t,n){this.v=t,this.k=n}function m(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){m(i,r,o,a,u,"next",t)}function u(t){m(i,r,o,a,u,"throw",t)}a(void 0)}))}}function w(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var n=function(t){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(n)?n:n+""}var S=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"register",value:(p=b(c().mark((function t(n){var r,o,i,a,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,o=n.email,i=n.password,t.next=3,fetch("".concat(e.BASE_URL,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:o,password:i})});case 3:return a=t.sent,t.next=6,a.json();case 6:return u=t.sent,t.abrupt("return",{ok:a.ok,message:u.message,data:u});case 8:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})},{key:"login",value:(l=b(c().mark((function t(n){var r,o,i,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.email,o=n.password,t.prev=1,t.next=4,fetch("".concat(e.BASE_URL,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});case 4:return i=t.sent,t.next=7,i.json();case 7:return a=t.sent,t.abrupt("return",{ok:i.ok,message:a.message,data:a});case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",{ok:!1,message:"Network error: "+t.t0.message,data:null});case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),function(t){return l.apply(this,arguments)})},{key:"getAllStories",value:function(){var t=b(c().mark((function t(n){var r,o,i,a,u,s,f,l,p,y=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(r=y.length>1&&void 0!==y[1]?y[1]:{}).page,i=void 0===o?1:o,a=r.size,u=void 0===a?10:a,s=r.location,f=void 0===s?0:s,t.next=3,fetch("".concat(e.BASE_URL,"/stories?page=").concat(i,"&size=").concat(u,"&location=").concat(f),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return l=t.sent,t.next=6,l.json();case 6:return p=t.sent,t.abrupt("return",{ok:l.ok,message:p.message,data:{stories:p.listStory||p.stories||[]}});case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},{key:"getStoryDetail",value:(f=b(c().mark((function t(n,r){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.BASE_URL,"/stories/").concat(n),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)}))),function(t,n){return f.apply(this,arguments)})},{key:"addStory",value:(s=b(c().mark((function t(n){var r,a,u,s,f,l,p,y,v,h,d,m;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.token,a=n.description,u=n.photo,s=n.lat,f=n.lon,(l=new FormData).append("description",a),l.append("photo",u),l.append("lat",s.toString()),l.append("lon",f.toString()),p=i(l.entries());try{for(p.s();!(y=p.n()).done;)v=o(y.value,2),h=v[0],d=v[1],console.log(h,d)}catch(t){p.e(t)}finally{p.f()}return t.next=10,fetch("".concat(e.BASE_URL,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:l});case 10:return m=t.sent,t.abrupt("return",m.json());case 12:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})},{key:"addStoryGuest",value:(u=b(c().mark((function t(n){var r,o,i,a,u,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.description,o=n.photo,i=n.lat,a=n.lon,(u=new FormData).append("description",r),u.append("photo",o),i&&u.append("lat",i),a&&u.append("lon",a),t.next=8,fetch("".concat(e.BASE_URL,"/stories/guest"),{method:"POST",body:u});case 8:return s=t.sent,t.abrupt("return",s.json());case 10:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"subscribePushNotification",value:(a=b(c().mark((function t(n,r){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.BASE_URL,"/notifications/subscribe"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)}))),function(t,n){return a.apply(this,arguments)})},{key:"unsubscribePushNotification",value:(r=b(c().mark((function t(n,r){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e.BASE_URL,"/notifications/subscribe"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({endpoint:r})});case 2:return o=t.sent,t.abrupt("return",o.json());case 4:case"end":return t.stop()}}),t)}))),function(t,n){return r.apply(this,arguments)})}],n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,a,u,s,f,l,p}();const k=S;function x(){var t,n=window.location.hash.slice(1)||"/";return["/","/about","/stories/add"].includes(n)?n:function(t){var n="";return t.resource&&(n=n.concat("/".concat(t.resource))),t.id&&(n=n.concat("/:id")),n||"/"}({resource:(t=n.split("/"))[1]||null,id:t[2]||null})}function _(){var t,n=document.getElementById("auth-section");n&&(E()?(n.innerHTML='\n      <button id="logout-btn" class="btn-logout">\n        Logout\n      </button>\n    ',null===(t=document.getElementById("logout-btn"))||void 0===t||t.addEventListener("click",G)):n.innerHTML='\n      <a href="#/login" class="btn-login">Login</a>\n      <a href="#/register" class="btn-register">Register</a>\n    ')}function O(){return localStorage.getItem(e.ACCESS_TOKEN_KEY)}function j(t){t?localStorage.setItem(e.ACCESS_TOKEN_KEY,t):console.error("Token tidak valid")}function P(){localStorage.removeItem(e.ACCESS_TOKEN_KEY)}function E(){return!!O()}function T(t){var n=x();return["/login","/register"].includes(n)&&E()?(location.hash="/",null):t}function N(t){return E()||["/login","/register"].includes(x())?t:(location.hash="/login",null)}function G(){P(),_(),window.location.hash="#/login",window.location.reload()}function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function I(){var t=D(),n=t.m(I),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,F(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(I=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new U(t,n)},AsyncIterator:R,async:function(t,n,e,o,a){return(r(n)?M:C)(i(t),n,e,o,a)},keys:B,values:F}})()}function F(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(A(t)+" is not iterable")}function B(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function C(t,n,e,r,o){var i=M(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function M(t,n,e,r,o){return new R(D().w(t,n,e,r),o||Promise)}function R(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof U?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(q(R.prototype),q(R.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),q(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function D(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return q(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(q(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,q(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,q(l,"constructor",s),q(s,"constructor",c),c.displayName="GeneratorFunction",q(s,o,"GeneratorFunction"),q(l),q(l,o,"Generator"),q(l,r,(function(){return this})),q(l,"toString",(function(){return"[object Generator]"})),(D=function(){return{w:i,m:p}})()}function q(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}q=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){q(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},q(t,n,e,r)}function U(t,n){this.v=t,this.k=n}function z(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){z(i,r,o,a,u,"next",t)}function u(t){z(i,r,o,a,u,"throw",t)}a(void 0)}))}}var W=e.DATABASE_NAME,Y=e.DATABASE_VERSION,K=e.OBJECT_STORE_NAME,V=null;function J(){return V||(V=new Promise((function(t,n){var e=indexedDB.open(W,Y);e.onupgradeneeded=function(t){var n=t.target.result;n.objectStoreNames.contains(K)||n.createObjectStore(K,{keyPath:"id"})},e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error)}})))}function $(){return Q.apply(this,arguments)}function Q(){return(Q=H(I().mark((function t(){var n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:return n=t.sent,t.abrupt("return",new Promise((function(t,e){var r=n.transaction(K,"readonly").objectStore(K).getAll();r.onsuccess=function(){return t(r.result)},r.onerror=function(){return e(r.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function X(t){return Z.apply(this,arguments)}function Z(){return(Z=H(I().mark((function t(n){var e;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:return e=t.sent,t.abrupt("return",new Promise((function(t,r){var o=e.transaction(K,"readwrite").objectStore(K).put(n);o.onsuccess=function(){return t(o.result)},o.onerror=function(){return r(o.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){return nt.apply(this,arguments)}function nt(){return(nt=H(I().mark((function t(n){var e;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J();case 2:return e=t.sent,t.abrupt("return",new Promise((function(t,r){var o=e.transaction(K,"readwrite").objectStore(K).delete(n);o.onsuccess=function(){return t(o.result)},o.onerror=function(){return r(o.error)}})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(){var t=st(),n=t.m(rt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ot(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(rt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new lt(t,n)},AsyncIterator:ct,async:function(t,n,e,o,a){return(r(n)?ut:at)(i(t),n,e,o,a)},keys:it,values:ot}})()}function ot(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(et(t)+" is not iterable")}function it(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function at(t,n,e,r,o){var i=ut(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ut(t,n,e,r,o){return new ct(st().w(t,n,e,r),o||Promise)}function ct(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof lt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(ft(ct.prototype),ft(ct.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),ft(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function st(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return ft(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(ft(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ft(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ft(l,"constructor",s),ft(s,"constructor",c),c.displayName="GeneratorFunction",ft(s,o,"GeneratorFunction"),ft(l),ft(l,o,"Generator"),ft(l,r,(function(){return this})),ft(l,"toString",(function(){return"[object Generator]"})),(st=function(){return{w:i,m:p}})()}function ft(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ft=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){ft(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},ft(t,n,e,r)}function lt(t,n){this.v=t,this.k=n}function pt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function yt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){pt(i,r,o,a,u,"next",t)}function u(t){pt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function vt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ht(r.key),r)}}function ht(t){var n=function(t){if("object"!=et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=et(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(n)?n:n+""}const dt=function(){return t=function t(n){var e=n.view;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._dicodingStoryApi=k},n=[{key:"showStories",value:(e=yt(rt().mark((function t(){var n,e,r,o;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=O(),t.prev=1,n){t.next=4;break}throw new Error("No authentication token found");case 4:return t.next=6,this._dicodingStoryApi.getAllStories(n);case 6:if((e=t.sent).ok){t.next=9;break}throw new Error(e.message||"Failed to load stories");case 9:r=e.data.stories||e.data.listStory||[],this._view.showStories(r),this._view.initializeMaps(r),this._setupLikeButtons(r),t.next=22;break;case 15:return t.prev=15,t.t0=t.catch(1),console.error("Gagal mengambil dari API. Mengambil dari IndexedDB...",t.t0),t.next=20,$();case 20:(o=t.sent).length>0?(this._view.showStories(o),this._view.initializeMaps(o),this._setupLikeButtons(o)):this._view.showError(t.t0);case 22:case"end":return t.stop()}}),t,this,[[1,15]])}))),function(){return e.apply(this,arguments)})},{key:"_setupLikeButtons",value:function(t){t.forEach((function(t){var n=document.querySelector('[data-save-id="'.concat(t.id,'"]'));n&&n.addEventListener("click",yt(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(t);case 2:alert("Story disimpan ke favorit!");case 3:case"end":return n.stop()}}),n)}))))}))}}],n&&vt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function bt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function wt(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function gt(t,n,e){return(n=function(t){var n=function(t){if("object"!=mt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=mt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mt(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function kt(){var t=Et(),n=t.m(kt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,xt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(kt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Nt(t,n)},AsyncIterator:Pt,async:function(t,n,e,o,a){return(r(n)?jt:Ot)(i(t),n,e,o,a)},keys:_t,values:xt}})()}function xt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(St(t)+" is not iterable")}function _t(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ot(t,n,e,r,o){var i=jt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function jt(t,n,e,r,o){return new Pt(Et().w(t,n,e,r),o||Promise)}function Pt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Nt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Tt(Pt.prototype),Tt(Pt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Tt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Et(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Tt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Tt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Tt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Tt(l,"constructor",s),Tt(s,"constructor",c),c.displayName="GeneratorFunction",Tt(s,o,"GeneratorFunction"),Tt(l),Tt(l,o,"Generator"),Tt(l,r,(function(){return this})),Tt(l,"toString",(function(){return"[object Generator]"})),(Et=function(){return{w:i,m:p}})()}function Tt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Tt=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Tt(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Tt(t,n,e,r)}function Nt(t,n){this.v=t,this.k=n}function Gt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function At(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Gt(i,r,o,a,u,"next",t)}function u(t){Gt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function It(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ft(r.key),r)}}function Ft(t){var n=function(t){if("object"!=St(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=St(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(n)?n:n+""}var Lt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=new dt({view:this})},n=[{key:"render",value:(o=At(kt().mark((function t(){return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <main class="container" aria-labelledby="stories-heading">\n        <h1 id="stories-heading">Dicoding Universe</h1>\n        <h2 id="welcome-message" class="welcome-message"></h2>\n        <section id="stories-list" class="stories-list" aria-label="Story List">\n        </section>\n      </main>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=At(kt().mark((function t(){var n,e;return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("userName")||"Guest",(e=document.getElementById("welcome-message"))&&(e.textContent="Hello, ".concat(n)),t.next=5,this._presenter.showStories();case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"showStories",value:function(t){var n=this;document.querySelector("#stories-list").innerHTML=t.map((function(t){return n._createStoryItem(t)})).join("")}},{key:"showCachedStories",value:(e=At(kt().mark((function t(){var n;return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$();case 2:(n=t.sent).length>0?(this.showStories(n),this.initializeMaps(n)):this.showError(new Error("No cached stories available."));case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initializeMaps",value:function(t){t.forEach((function(t){if(t.lat&&t.lon)try{var n="map-".concat(t.id);if(!document.getElementById(n)||"undefined"==typeof L)return;var e=L.map(n).setView([t.lat,t.lon],15);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),L.marker([t.lat,t.lon]).addTo(e).bindPopup("Story location: ".concat(t.lat,", ").concat(t.lon)).openPopup()}catch(n){console.error("Failed to initialize map for story ".concat(t.id,":"),n);var r=document.getElementById("map-".concat(t.id));r&&(r.innerHTML='<p class="error">Failed to load the map. Please check your internet connection</p>')}}))}},{key:"showError",value:function(t){console.error("Failed to load stories:",t),document.querySelector("#stories-list").innerHTML='\n      <div class="error-message">\n        Oops! We couldn\'t fetch the stories. Showing cached stories instead.\n      </div>\n    ',this.showCachedStories()}},{key:"_createStoryItem",value:function(t){var n="map-".concat(t.id),e=t.lat&&t.lon;return'\n    <article class="story-item">\n      <img src="'.concat(t.photoUrl,'" alt="').concat(t.description,'" class="story-image">\n      <div class="story-content">\n        <h3>').concat(t.name||"Guest",'</h3>\n        <time datetime="').concat(t.createdAt,'">').concat(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Date(t).toLocaleDateString(n,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?wt(Object(e),!0).forEach((function(n){gt(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):wt(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({year:"numeric",month:"long",day:"numeric"},e))}(t.createdAt),"</time>\n        <p>").concat(t.description,'</p>\n\n        <button class="like-button" data-save-id="').concat(t.id,'">Simpan Story</button>\n\n        ').concat(e?'\n              <div class="story-location">\n                <small>Lokasi: '.concat(t.lat,", ").concat(t.lon,'</small>\n                <div id="').concat(n,'" class="story-map" style="height: 150px; width: 100%;"></div>\n              </div>\n            '):"","\n      </div>\n    </article>\n  ")}}],n&&It(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r,o}();function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Ct(){var t=zt(),n=t.m(Ct),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Mt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ct=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Wt(t,n)},AsyncIterator:Ut,async:function(t,n,e,o,a){return(r(n)?qt:Dt)(i(t),n,e,o,a)},keys:Rt,values:Mt}})()}function Mt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Bt(t)+" is not iterable")}function Rt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Dt(t,n,e,r,o){var i=qt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function qt(t,n,e,r,o){return new Ut(zt().w(t,n,e,r),o||Promise)}function Ut(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Wt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ht(Ut.prototype),Ht(Ut.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ht(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function zt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ht(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Ht(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ht(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ht(l,"constructor",s),Ht(s,"constructor",c),c.displayName="GeneratorFunction",Ht(s,o,"GeneratorFunction"),Ht(l),Ht(l,o,"Generator"),Ht(l,r,(function(){return this})),Ht(l,"toString",(function(){return"[object Generator]"})),(zt=function(){return{w:i,m:p}})()}function Ht(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ht=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ht(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ht(t,n,e,r)}function Wt(t,n){this.v=t,this.k=n}function Yt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Kt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vt(r.key),r)}}function Vt(t){var n=function(t){if("object"!=Bt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Bt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bt(n)?n:n+""}const Jt=function(){return t=function t(n){var e=n.view;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._dicodingStoryApi=k},n=[{key:"postStory",value:(e=Ct().mark((function t(n){var e,r,o,i,a,u;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.description,r=n.photo,o=n.lat,i=n.lon,t.prev=1,!(a=O())){t.next=9;break}return t.next=6,this._dicodingStoryApi.addStory({token:a,description:e,photo:r,lat:o,lon:i});case 6:u=t.sent,t.next=12;break;case 9:return t.next=11,this._dicodingStoryApi.addStoryGuest({description:e,photo:r,lat:o,lon:i});case 11:u=t.sent;case 12:if(!(u&&u.data&&u.data.story)){t.next=15;break}return t.next=15,X(u.data.story);case 15:this._view.showSuccess(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),this._view.showError(t.t0);case 21:case"end":return t.stop()}}),t,this,[[1,18]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){Yt(i,r,o,a,u,"next",t)}function u(t){Yt(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)})}],n&&Kt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Qt(){var t=rn(),n=t.m(Qt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Xt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Qt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new an(t,n)},AsyncIterator:en,async:function(t,n,e,o,a){return(r(n)?nn:tn)(i(t),n,e,o,a)},keys:Zt,values:Xt}})()}function Xt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError($t(t)+" is not iterable")}function Zt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function tn(t,n,e,r,o){var i=nn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function nn(t,n,e,r,o){return new en(rn().w(t,n,e,r),o||Promise)}function en(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof an?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(on(en.prototype),on(en.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),on(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function rn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return on(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(on(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,on(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,on(l,"constructor",s),on(s,"constructor",c),c.displayName="GeneratorFunction",on(s,o,"GeneratorFunction"),on(l),on(l,o,"Generator"),on(l,r,(function(){return this})),on(l,"toString",(function(){return"[object Generator]"})),(rn=function(){return{w:i,m:p}})()}function on(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}on=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){on(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},on(t,n,e,r)}function an(t,n){this.v=t,this.k=n}function un(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function cn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){un(i,r,o,a,u,"next",t)}function u(t){un(i,r,o,a,u,"throw",t)}a(void 0)}))}}function sn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fn(r.key),r)}}function fn(t){var n=function(t){if("object"!=$t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=$t(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(n)?n:n+""}function ln(t){return function(t){if(Array.isArray(t))return pn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return pn(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?pn(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}const yn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=new Jt({view:this}),this._mediaStream=null,this._selectedLocation=null,this._handleFormSubmit=this._handleFormSubmit.bind(this),this._resetPhotoInput=this._resetPhotoInput.bind(this),this._stopCamera=this._stopCamera.bind(this)},n=[{key:"render",value:(i=cn(Qt().mark((function t(){return Qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container add-story-container" aria-labelledby="add-story-title">\n        <h1 id="add-story-title" class="add-story-title">Add a New Story</h1>\n        \n        <form id="add-story-form" class="add-story-form" aria-labelledby="add-story-title">\n          <div class="form-group">\n            <label for="description" id="description-label">Description</label>\n            <textarea id="description" class="form-input" aria-labelledby="description-label" required aria-required="true"></textarea>\n          </div>\n          \n          <div class="form-group camera-preview-container">\n            <video id="camera-preview" autoplay playsinline></video>\n            <button type="button" id="capture-btn" class="btn">Capture</button>\n          </div>\n          \n          <div class="form-group">\n            <canvas id="photo-canvas" style="display:none;"></canvas>\n            <img id="photo-preview" class="photo-preview" style="display:none; alt="Captured photo preview">\n            <button type="button" id="retake-btn" class="btn" style="display:none; margin-top:10px;">Retake</button>\n          </div>\n          \n          <div class="form-group">\n            <label for="location-input">Location</label>\n            <div class="map-container">\n              <div id="map" style="height: 400px;"></div>\n              <small class="map-instruction">Tap the map to choose a location</small>\n              <input type="hidden" id="lat">\n              <input type="hidden" id="lon">\n            </div>\n          </div>\n          \n          <div class="form-actions">\n            <button type="submit" class="btn btn-primary">Add Story</button>\n          </div>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=cn(Qt().mark((function t(){var n=this;return Qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._initMap(),this._cameraPreview=document.getElementById("camera-preview"),this._cameraContainer=document.querySelector(".camera-preview-container"),this._photoPreview=document.getElementById("photo-preview"),this._retakeBtn=document.getElementById("retake-btn"),this._captureBtn=document.getElementById("capture-btn"),this._addStoryForm=document.getElementById("add-story-form"),t.next=9,this._handleMediaSourceChange();case 9:this._addStoryForm.addEventListener("submit",function(){var t=cn(Qt().mark((function t(e){return Qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,n._handleFormSubmit();case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),this._retakeBtn.addEventListener("click",(function(){n._resetPhotoInput()}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"cleanup",value:function(){this._stopCamera(),this._addStoryForm&&this._addStoryForm.removeEventListener("submit",this._handleFormSubmit),this._retakeBtn&&this._retakeBtn.removeEventListener("click",this._resetPhotoInput),this._captureBtn&&(this._captureBtn.onclick=null),this._cameraPreview=null,this._cameraContainer=null,this._photoPreview=null,this._retakeBtn=null,this._captureBtn=null,this._addStoryForm=null}},{key:"_initMap",value:function(){var t=this;this._map=L.map("map").setView([-6.2,106.816666],5),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this._map);var n=L.DivIcon.extend({options:{html:'<div class="custom-marker">\n                <div class="marker-pin"></div>\n                <div class="coordinate-display">Lat: 0.0000, Lng: 0.0000</div>\n              </div>',className:"custom-marker-container",iconSize:[30,42],iconAnchor:[15,42],popupAnchor:[0,-36]}});this._marker=L.marker(this._map.getCenter(),{draggable:!0,icon:new n}).addTo(this._map);var e=function(n,e){var r,o=null===(r=t._marker.getElement())||void 0===r?void 0:r.querySelector(".coordinate-display");o&&(o.textContent="Lat: ".concat(n.toFixed(4),", Lng: ").concat(e.toFixed(4))),document.getElementById("lat").value=n,document.getElementById("lon").value=e,t._selectedLocation={lat:n,lon:e}};this._marker.on("dragend",(function(t){var n=t.target.getLatLng(),r=n.lat,o=n.lng;e(r,o)})),this._map.on("click",(function(n){var r=n.latlng,o=r.lat,i=r.lng;t._marker.setLatLng([o,i]),e(o,i)}));var r=this._map.getCenter();e(r.lat,r.lng)}},{key:"_handleMediaSourceChange",value:(r=cn(Qt().mark((function t(){var n=this;return Qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopCamera(),this._cameraContainer&&(this._cameraContainer.style.display="block"),this._photoPreview&&(this._photoPreview.style.display="none"),this._retakeBtn&&(this._retakeBtn.style.display="none"),t.prev=4,t.next=7,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 7:this._mediaStream=t.sent,e=this._mediaStream,Array.isArray(window.currentStreams)?window.currentStreams=[].concat(ln(window.currentStreams),[e]):window.currentStreams=[e],this._cameraPreview&&(this._cameraPreview.srcObject=this._mediaStream),this._captureBtn.onclick=function(){return n._capturePhoto()},t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),console.error("Error accessing camera:",t.t0),alert("Camera access denied. Please allow camera permissions.");case 17:case"end":return t.stop()}var e}),t,this,[[4,13]])}))),function(){return r.apply(this,arguments)})},{key:"_capturePhoto",value:function(){var t=this._cameraPreview,n=document.getElementById("photo-canvas"),e=n.getContext("2d");n.width=t.videoWidth,n.height=t.videoHeight,e.drawImage(t,0,0,n.width,n.height),this._displayPhotoPreview(n.toDataURL("image/jpeg")),this._stopCamera(),this._cameraContainer&&(this._cameraContainer.style.display="none")}},{key:"_displayPhotoPreview",value:function(t){this._photoPreview.src=t,this._photoPreview.style.display="block",this._retakeBtn.style.display="block"}},{key:"_resetPhotoInput",value:function(){this._photoPreview.src="",this._photoPreview.style.display="none",this._retakeBtn.style.display="none",this._handleMediaSourceChange()}},{key:"_stopCamera",value:function(){try{this._mediaStream&&(this._mediaStream.getTracks().forEach((function(t){t.stop(),t.enabled=!1})),this._mediaStream=null),this._cameraPreview&&(this._cameraPreview.pause(),this._cameraPreview.srcObject=null,this._cameraPreview.load())}catch(t){console.error("Error stopping camera:",t)}}},{key:"_handleFormSubmit",value:(e=cn(Qt().mark((function t(){var n,e,r,o,i,a,u;return Qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this._stopCamera(),n=document.getElementById("description").value,e=document.getElementById("lat").value,r=document.getElementById("lon").value,n){t.next=8;break}return alert("The description field cannot be empty"),t.abrupt("return");case 8:if(e&&r){t.next=11;break}return alert("Mark your location on the map"),t.abrupt("return");case 11:if(!(i=this._photoPreview).src||"none"===i.style.display){t.next=27;break}if(!i.src.startsWith("data:")){t.next=23;break}return t.next=16,fetch(i.src);case 16:return a=t.sent,t.next=19,a.blob();case 19:u=t.sent,o=new File([u],"story-photo.jpg",{type:"image/jpeg"}),t.next=25;break;case 23:return alert("No valid photo found."),t.abrupt("return");case 25:t.next=29;break;case 27:return alert("Add a photo to proceed"),t.abrupt("return");case 29:return t.next=31,this._presenter.postStory({description:n,photo:o,lat:parseFloat(e),lon:parseFloat(r)});case 31:t.next=37;break;case 33:t.prev=33,t.t0=t.catch(0),console.error("Error in form submission:",t.t0),alert("Failed to upload your story. Please try again.");case 37:case"end":return t.stop()}}),t,this,[[0,33]])}))),function(){return e.apply(this,arguments)})},{key:"showSuccess",value:function(){this._stopCamera(),setTimeout((function(){window.location.hash="#/"}),300)}},{key:"showError",value:function(t){console.error("Failed to upload your story:",t),alert("Failed to upload your story: ".concat(t.message||"Terjadi kesalahan"))}}],n&&sn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r,o,i}();function vn(t){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(t)}function hn(){var t=Sn(),n=t.m(hn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,dn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(hn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new xn(t,n)},AsyncIterator:gn,async:function(t,n,e,o,a){return(r(n)?wn:bn)(i(t),n,e,o,a)},keys:mn,values:dn}})()}function dn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(vn(t)+" is not iterable")}function mn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function bn(t,n,e,r,o){var i=wn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function wn(t,n,e,r,o){return new gn(Sn().w(t,n,e,r),o||Promise)}function gn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof xn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(kn(gn.prototype),kn(gn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),kn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Sn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return kn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(kn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,kn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,kn(l,"constructor",s),kn(s,"constructor",c),c.displayName="GeneratorFunction",kn(s,o,"GeneratorFunction"),kn(l),kn(l,o,"Generator"),kn(l,r,(function(){return this})),kn(l,"toString",(function(){return"[object Generator]"})),(Sn=function(){return{w:i,m:p}})()}function kn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}kn=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){kn(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},kn(t,n,e,r)}function xn(t,n){this.v=t,this.k=n}function _n(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function On(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){_n(i,r,o,a,u,"next",t)}function u(t){_n(i,r,o,a,u,"throw",t)}a(void 0)}))}}const jn={init:function(t){var n=this;return On(hn().mark((function e(){var r,o;return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.storyListContainer,e.next=3,$();case 3:if((o=e.sent).length){e.next=7;break}return r.innerHTML="<p>Tidak ada story favorit.</p>",e.abrupt("return");case 7:r.innerHTML=o.map((function(t){return"\n      <article>\n        <h3>".concat(t.name,"</h3>\n        <p>").concat(t.description,'</p>\n        <button data-id="').concat(t.id,'">Hapus</button>\n      </article>\n    ')})).join(""),r.querySelectorAll("button[data-id]").forEach((function(t){t.addEventListener("click",On(hn().mark((function e(){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t.dataset.id);case 2:n.init({storyListContainer:r});case 3:case"end":return e.stop()}}),e)}))))}));case 9:case"end":return e.stop()}}),e)})))()}};function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function En(){var t=Fn(),n=t.m(En),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Tn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(En=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Bn(t,n)},AsyncIterator:In,async:function(t,n,e,o,a){return(r(n)?An:Gn)(i(t),n,e,o,a)},keys:Nn,values:Tn}})()}function Tn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Pn(t)+" is not iterable")}function Nn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Gn(t,n,e,r,o){var i=An(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function An(t,n,e,r,o){return new In(Fn().w(t,n,e,r),o||Promise)}function In(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Bn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ln(In.prototype),Ln(In.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ln(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Fn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ln(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Ln(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ln(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ln(l,"constructor",s),Ln(s,"constructor",c),c.displayName="GeneratorFunction",Ln(s,o,"GeneratorFunction"),Ln(l),Ln(l,o,"Generator"),Ln(l,r,(function(){return this})),Ln(l,"toString",(function(){return"[object Generator]"})),(Fn=function(){return{w:i,m:p}})()}function Ln(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ln=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ln(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ln(t,n,e,r)}function Bn(t,n){this.v=t,this.k=n}function Cn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Mn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Cn(i,r,o,a,u,"next",t)}function u(t){Cn(i,r,o,a,u,"throw",t)}a(void 0)}))}}const Rn={render:function(){return Mn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n    <section class="liked-page container">\n      <h2 class="section-title">Story Favorit</h2>\n      <div id="story-list" class="story-grid"></div>\n    </section>\n  ');case 1:case"end":return t.stop()}}),t)})))()},afterRender:function(){return Mn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jn.init({storyListContainer:document.querySelector("#story-list")});case 2:case"end":return t.stop()}}),t)})))()}};function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function qn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Un(r.key),r)}}function Un(t){var n=function(t){if("object"!=Dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Dn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dn(n)?n:n+""}var zn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"showSubmitLoadingButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Memproses...",n=document.getElementById("submit-button-container");n&&(n.innerHTML='\n      <button class="btn" type="submit" disabled aria-live="polite" aria-busy="true">\n        <i class="fas fa-spinner loader-button" aria-hidden="true"></i> \n        <span class="loading-text">'.concat(t,"</span>\n      </button>\n      "))}},{key:"hideSubmitLoadingButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Submit",n=document.getElementById("submit-button-container");n&&(n.innerHTML='\n      <button class="btn" type="submit" aria-live="polite">\n        '.concat(t,"\n      </button>\n    "))}}],n&&qn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Wn(){var t=Qn(),n=t.m(Wn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Yn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Wn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Zn(t,n)},AsyncIterator:$n,async:function(t,n,e,o,a){return(r(n)?Jn:Vn)(i(t),n,e,o,a)},keys:Kn,values:Yn}})()}function Yn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Hn(t)+" is not iterable")}function Kn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Vn(t,n,e,r,o){var i=Jn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Jn(t,n,e,r,o){return new $n(Qn().w(t,n,e,r),o||Promise)}function $n(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Zn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Xn($n.prototype),Xn($n.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Xn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Qn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Xn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Xn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Xn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Xn(l,"constructor",s),Xn(s,"constructor",c),c.displayName="GeneratorFunction",Xn(s,o,"GeneratorFunction"),Xn(l),Xn(l,o,"Generator"),Xn(l,r,(function(){return this})),Xn(l,"toString",(function(){return"[object Generator]"})),(Qn=function(){return{w:i,m:p}})()}function Xn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xn=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Xn(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Xn(t,n,e,r)}function Zn(t,n){this.v=t,this.k=n}function te(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ne(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ee(r.key),r)}}function ee(t){var n=function(t){if("object"!=Hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Hn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(n)?n:n+""}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(re=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oe(t)}function ie(t,n){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ie(t,n)}function ae(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function ue(t,n){return t.get(se(t,n))}function ce(t,n,e){return t.set(se(t,n),e),e}function se(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var fe=new WeakMap,le=new WeakMap,pe=function(t){function n(t){var e,r=t.view,o=t.model;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),ae(e=function(t,n,e){return n=oe(n),function(t,n){if(n&&("object"==Hn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,re()?Reflect.construct(n,e||[],oe(t).constructor):n.apply(t,e))}(this,n),fe,void 0),ae(e,le,void 0),ce(fe,e,r),ce(le,e,o),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&ie(t,n)}(n,t),e=n,r=[{key:"getRegistered",value:(o=Wn().mark((function t(n){var e,r,o,i;return Wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.name,r=n.email,o=n.password,t.prev=1,null!=e&&e.trim()){t.next=4;break}throw new Error("Masukkan nama Anda");case 4:if(null!=r&&r.trim()){t.next=6;break}throw new Error("Masukkan alamat email Anda");case 6:if(null!=o&&o.trim()){t.next=8;break}throw new Error("Masukkan kata sandi Anda");case 8:if(!(o.length<6)){t.next=10;break}throw new Error("Kata sandi harus terdiri dari 6 karakter atau lebih");case 10:return this.showSubmitLoadingButton("Memuat..."),t.next=13,ue(le,this).register({name:e.trim(),email:r.trim(),password:o.trim()});case 13:if((i=t.sent).ok){t.next=16;break}throw new Error(i.message||"Pendaftaran gagal. Silakan coba lagi.");case 16:ue(fe,this).registeredSuccessfully(i.message),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),ue(fe,this).registeredFailed(t.t0.message);case 22:return t.prev=22,this.hideSubmitLoadingButton("Daftar"),t.finish(22);case 25:case"end":return t.stop()}}),t,this,[[1,19,22,25]])})),i=function(){var t=this,n=arguments;return new Promise((function(e,r){var i=o.apply(t,n);function a(t){te(i,e,r,a,u,"next",t)}function u(t){te(i,e,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r&&ne(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o,i}(zn);function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function ve(){var t=ge(),n=t.m(ve),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,he(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ve=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new ke(t,n)},AsyncIterator:we,async:function(t,n,e,o,a){return(r(n)?be:me)(i(t),n,e,o,a)},keys:de,values:he}})()}function he(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ye(t)+" is not iterable")}function de(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function me(t,n,e,r,o){var i=be(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function be(t,n,e,r,o){return new we(ge().w(t,n,e,r),o||Promise)}function we(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof ke?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Se(we.prototype),Se(we.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Se(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ge(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Se(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Se(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Se(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Se(l,"constructor",s),Se(s,"constructor",c),c.displayName="GeneratorFunction",Se(s,o,"GeneratorFunction"),Se(l),Se(l,o,"Generator"),Se(l,r,(function(){return this})),Se(l,"toString",(function(){return"[object Generator]"})),(ge=function(){return{w:i,m:p}})()}function Se(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Se=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Se(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Se(t,n,e,r)}function ke(t,n){this.v=t,this.k=n}function xe(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function _e(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){xe(i,r,o,a,u,"next",t)}function u(t){xe(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Oe(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,je(r.key),r)}}function je(t){var n=function(t){if("object"!=ye(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ye(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ye(n)?n:n+""}function Pe(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ee(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Te=new WeakMap,Ne=new WeakSet,Ge=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,n=Ne),n.add(this),function(t,n){Pe(t,n),n.set(t,null)}(this,Te)},n=[{key:"render",value:(r=_e(ve().mark((function t(){return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="register-container" aria-labelledby="register-title">\n        <div class="register-form-container">\n          <h1 id="register-title" class="register__title">Register</h1>\n\n          <form id="register-form" class="register-form">\n            <div class="form-control">\n              <label for="name-input" id="name-label">Full Name</label>\n              <input \n                id="name-input" \n                type="text" \n                name="name" \n                aria-labelledby="name-label"\n                placeholder="Full name"\n                aria-required="true"\n                required\n              />\n            </div>\n            \n            <div class="form-control">\n              <label for="email-input" id="email-label" class="register-form__email-title">Email</label>\n              <div class="register-form__title-container">\n                <input \n                  id="email-input" \n                  type="email" \n                  name="email" \n                  placeholder="yourname@gmail.com"\n                  aria-labelledby="email-label"\n                  required\n                />\n              </div>\n            </div>\n\n            <div class="form-control">\n              <label for="password-input" class="register-form__password-title">Password</label>\n              <div class="register-form__title-container">\n                <input \n                  id="password-input" \n                  type="password" \n                  name="password" \n                  placeholder="Create your password"\n                  required\n                />\n              </div>\n            </div>\n\n            <div class="form-buttons register-form__form-buttons">\n              <div id="submit-button-container">\n                <button class="btn" type="submit">Register</button>\n              </div>\n              <p class="register-form__already-have-account">\n                Already have an account? <a href="#/login">Login</a>\n              </p>\n            </div>\n          </form>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=_e(ve().mark((function t(){return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Te,e=new pe({view:this,model:k}),n.set(Ee(n,this),e),Ee(Ne,this,Ae).call(this);case 2:case"end":return t.stop()}var n,e}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"registeredSuccessfully",value:function(t){console.log(t),_(),window.location.hash="#/login"}},{key:"registeredFailed",value:function(t){var n,e=document.getElementById("register-form");if(e){null===(n=e.querySelector(".error-message"))||void 0===n||n.remove();var r=document.createElement("div");r.className="error-message fade-slide-down",r.setAttribute("role","alert"),r.textContent=t,e.prepend(r),r.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){r.focus()}),100)}}}],n&&Oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Ae(){var t=this,n=document.getElementById("register-form");n&&n.addEventListener("submit",function(){var n=_e(ve().mark((function n(e){var r,o,i,a;return ve().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),a={name:null===(r=document.getElementById("name-input"))||void 0===r?void 0:r.value,email:null===(o=document.getElementById("email-input"))||void 0===o?void 0:o.value,password:null===(i=document.getElementById("password-input"))||void 0===i?void 0:i.value},n.next=4,(u=Te,c=t,u.get(Ee(u,c))).getRegistered(a);case 4:case"end":return n.stop()}var u,c}),n)})));return function(t){return n.apply(this,arguments)}}())}function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Fe(){var t=De(),n=t.m(Fe),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Le(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Fe=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Ue(t,n)},AsyncIterator:Re,async:function(t,n,e,o,a){return(r(n)?Me:Ce)(i(t),n,e,o,a)},keys:Be,values:Le}})()}function Le(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ie(t)+" is not iterable")}function Be(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ce(t,n,e,r,o){var i=Me(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Me(t,n,e,r,o){return new Re(De().w(t,n,e,r),o||Promise)}function Re(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Ue?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(qe(Re.prototype),qe(Re.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),qe(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function De(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return qe(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(qe(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,qe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,qe(l,"constructor",s),qe(s,"constructor",c),c.displayName="GeneratorFunction",qe(s,o,"GeneratorFunction"),qe(l),qe(l,o,"Generator"),qe(l,r,(function(){return this})),qe(l,"toString",(function(){return"[object Generator]"})),(De=function(){return{w:i,m:p}})()}function qe(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qe=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){qe(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},qe(t,n,e,r)}function Ue(t,n){this.v=t,this.k=n}function ze(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function He(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,We(r.key),r)}}function We(t){var n=function(t){if("object"!=Ie(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ie(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(n)?n:n+""}function Ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ye=function(){return!!t})()}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}function Ve(t,n){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Ve(t,n)}function Je(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function $e(t,n){return t.get(Xe(t,n))}function Qe(t,n,e){return t.set(Xe(t,n),e),e}function Xe(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Ze=new WeakMap,tr=new WeakMap,nr=new WeakMap,er=function(t){function n(t){var e,r=t.view,o=t.model,i=t.authModel;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Je(e=function(t,n,e){return n=Ke(n),function(t,n){if(n&&("object"==Ie(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ye()?Reflect.construct(n,e||[],Ke(t).constructor):n.apply(t,e))}(this,n),Ze,void 0),Je(e,tr,void 0),Je(e,nr,void 0),Qe(Ze,e,r),Qe(tr,e,o),Qe(nr,e,i),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Ve(t,n)}(n,t),e=n,r=[{key:"handleLogin",value:(o=Fe().mark((function t(n){var e,r,o,i,a,u,c;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.email,r=n.password,t.prev=1,null!=e&&e.trim()){t.next=4;break}throw new Error("Email tidak boleh kosong");case 4:if(null!=r&&r.trim()){t.next=6;break}throw new Error("Password tidak boleh kosong");case 6:return this.showSubmitLoadingButton("Sedang masuk..."),t.next=9,$e(tr,this).login({email:e.trim(),password:r.trim()});case 9:if((i=t.sent).ok){t.next=12;break}throw new Error(i.message||"Gagal login");case 12:if(a=(null===(o=i.data)||void 0===o?void 0:o.loginResult)||{},u=a.name,c=a.token){t.next=15;break}throw new Error("Token tidak valid");case 15:$e(nr,this).putAccessToken(c),localStorage.setItem("userName",u),$e(Ze,this).loginSuccessfully(i.message),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(1),console.error("Terjadi kesalahan saat login:",t.t0),$e(Ze,this).loginFailed(t.t0.message);case 24:return t.prev=24,this.hideSubmitLoadingButton("Masuk"),t.finish(24);case 27:case"end":return t.stop()}}),t,this,[[1,20,24,27]])})),i=function(){var t=this,n=arguments;return new Promise((function(e,r){var i=o.apply(t,n);function a(t){ze(i,e,r,a,u,"next",t)}function u(t){ze(i,e,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r&&He(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o,i}(zn);function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function or(){var t=fr(),n=t.m(or),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ir(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(or=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new pr(t,n)},AsyncIterator:sr,async:function(t,n,e,o,a){return(r(n)?cr:ur)(i(t),n,e,o,a)},keys:ar,values:ir}})()}function ir(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(rr(t)+" is not iterable")}function ar(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ur(t,n,e,r,o){var i=cr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function cr(t,n,e,r,o){return new sr(fr().w(t,n,e,r),o||Promise)}function sr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof pr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(lr(sr.prototype),lr(sr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),lr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function fr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return lr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(lr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,lr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,lr(l,"constructor",s),lr(s,"constructor",c),c.displayName="GeneratorFunction",lr(s,o,"GeneratorFunction"),lr(l),lr(l,o,"Generator"),lr(l,r,(function(){return this})),lr(l,"toString",(function(){return"[object Generator]"})),(fr=function(){return{w:i,m:p}})()}function lr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lr=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){lr(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},lr(t,n,e,r)}function pr(t,n){this.v=t,this.k=n}function yr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function vr(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){yr(i,r,o,a,u,"next",t)}function u(t){yr(i,r,o,a,u,"throw",t)}a(void 0)}))}}function hr(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dr(r.key),r)}}function dr(t){var n=function(t){if("object"!=rr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=rr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rr(n)?n:n+""}function mr(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function br(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var wr=new WeakMap,gr=new WeakSet,Sr=function(){return t=function t(){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),mr(this,n=gr),n.add(this),function(t,n){mr(t,n),n.set(t,null)}(this,wr)},e=[{key:"showLoadingOnSubmitButton",value:function(){var t=document.querySelector("#submit-button-container");t&&(t.innerHTML='<button class="btn" type="submit" disabled><i class="fas fa-spinner fa-spin"></i> Memuat...</button>')}},{key:"restoreSubmitButton",value:function(){var t=document.querySelector("#submit-button-container");t&&(t.innerHTML='<button class="btn" type="submit">Masuk</button>')}},{key:"render",value:(o=vr(or().mark((function t(){return or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.documentElement.style.viewTransitionName="login-page",t.abrupt("return",'\n      <section class="login-container" style="view-transition-name: login-form;">\n        <article class="login-form-container">\n          <h1 class="login__title">Masuk</h1>\n          <form id="login-form" class="login-form">\n            <div class="form-control">\n              <label for="email-input" class="login-form__email-title">Email</label>\n              <input \n                id="email-input"\n                name="email"\n                type="email"\n                placeholder="you@example.com"\n                required\n                aria-required="true"\n              />\n            </div>\n            <div class="form-control">\n              <label for="password-input" class="login-form__password-title">Password</label>\n              <input \n                id="password-input"\n                name="password"\n                type="password"\n                placeholder="Kata sandi Anda"\n                required\n                aria-required="true"\n              />\n            </div>\n            <div class="form-buttons login-form__form-buttons">\n              <div id="submit-button-container">\n                <button class="btn" type="submit">Masuk</button>\n              </div>\n              <p class="login-form__do-not-have-account">Belum punya akun? <a href="#/register">Daftar</a></p>\n            </div>\n          </form>\n        </article>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=vr(or().mark((function t(){return or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.documentElement.style.viewTransitionName="",e=wr,r=new er({view:this,model:k,authModel:n}),e.set(br(e,this),r),br(gr,this,kr).call(this);case 3:case"end":return t.stop()}var e,r}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"loginSuccessfully",value:function(t){console.log("Berhasil login:",t),_(),window.location.hash="#/"}},{key:"loginFailed",value:function(t){var n=document.createElement("div");n.className="error-message",n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive"),n.textContent=t,document.querySelector("#login-form").prepend(n),setTimeout((function(){return n.focus()}),100)}}],e&&hr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o}();function kr(){var t=this,n=document.querySelector("#login-form");n&&n.addEventListener("submit",function(){var e=vr(or().mark((function e(r){var o,i,a,u;return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=null===(o=n.querySelector("#email-input"))||void 0===o||null===(o=o.value)||void 0===o?void 0:o.trim(),u=null===(i=n.querySelector("#password-input"))||void 0===i||null===(i=i.value)||void 0===i?void 0:i.trim(),a&&u){e.next=6;break}return t.loginFailed("Email dan password harus diisi"),e.abrupt("return");case 6:return e.prev=6,e.next=9,(c=wr,s=t,c.get(br(c,s))).handleLogin({email:a,password:u});case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Login error:",e.t0),t.loginFailed(e.t0.message||"Terjadi kesalahan saat login.");case 15:case"end":return e.stop()}var c,s}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}())}const xr={"/":new Lt,"/login":new Sr,"/register":new Ge,"/stories/add":new yn,"/liked":Rn};function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function Or(){var t=Gr(),n=t.m(Or),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,jr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Or=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Ir(t,n)},AsyncIterator:Nr,async:function(t,n,e,o,a){return(r(n)?Tr:Er)(i(t),n,e,o,a)},keys:Pr,values:jr}})()}function jr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(_r(t)+" is not iterable")}function Pr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Er(t,n,e,r,o){var i=Tr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Tr(t,n,e,r,o){return new Nr(Gr().w(t,n,e,r),o||Promise)}function Nr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Ir?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ar(Nr.prototype),Ar(Nr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ar(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Gr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ar(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Ar(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ar(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ar(l,"constructor",s),Ar(s,"constructor",c),c.displayName="GeneratorFunction",Ar(s,o,"GeneratorFunction"),Ar(l),Ar(l,o,"Generator"),Ar(l,r,(function(){return this})),Ar(l,"toString",(function(){return"[object Generator]"})),(Gr=function(){return{w:i,m:p}})()}function Ar(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ar=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ar(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ar(t,n,e,r)}function Ir(t,n){this.v=t,this.k=n}function Fr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Lr(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Fr(i,r,o,a,u,"next",t)}function u(t){Fr(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Br(){return Cr.apply(this,arguments)}function Cr(){return(Cr=Lr(Or().mark((function t(){return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Notification"in window){t.next=3;break}return alert("Browser tidak mendukung notifikasi."),t.abrupt("return",!1);case 3:if("granted"!==Notification.permission){t.next=5;break}return t.abrupt("return",!0);case 5:return t.next=7,Notification.requestPermission();case 7:if("granted"===t.sent){t.next=11;break}return alert("Izin notifikasi ditolak."),t.abrupt("return",!1);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mr(){return Rr.apply(this,arguments)}function Rr(){return(Rr=Lr(Or().mark((function t(){var n;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.serviceWorker.getRegistration();case 2:return n=t.sent,t.next=5,null==n?void 0:n.pushManager.getSubscription();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dr(){return qr.apply(this,arguments)}function qr(){return(qr=Lr(Or().mark((function t(){var n;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mr();case 2:return n=t.sent,t.abrupt("return",!!n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ur(){return zr.apply(this,arguments)}function zr(){return(zr=Lr(Or().mark((function t(){var n,r,o,i,a,u;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Br();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,Dr();case 6:if(!t.sent){t.next=9;break}return alert("Kamu sudah berlangganan notifikasi."),t.abrupt("return");case 9:return t.prev=9,t.next=12,navigator.serviceWorker.getRegistration();case 12:return n=t.sent,t.next=15,n.pushManager.subscribe((void 0,void 0,void 0,{userVisibleOnly:!0,applicationServerKey:(s=e.VAPID_PUBLIC_KEY,f=(s+"=".repeat((4-s.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),l=atob(f),Uint8Array.from((c=l,function(t){if(Array.isArray(t))return bt(t)}(c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,n){if(t){if("string"==typeof t)return bt(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?bt(t,n):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return t.charCodeAt(0)}))))}));case 15:return r=t.sent,o=r.toJSON(),i=o.endpoint,a=o.keys,u=O(),t.next=20,k.subscribePushNotification(u,{endpoint:i,keys:a});case 20:if(!t.sent.error){t.next=26;break}return t.next=24,r.unsubscribe();case 24:return alert("Gagal menyimpan langganan ke server."),t.abrupt("return");case 26:alert("Berhasil berlangganan notifikasi."),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(9),alert("Terjadi kesalahan saat proses berlangganan."),console.error(t.t0);case 33:case"end":return t.stop()}var c,s,f,l}),t,null,[[9,29]])})))).apply(this,arguments)}function Hr(){return Wr.apply(this,arguments)}function Wr(){return(Wr=Lr(Or().mark((function t(){var n,e,r,o;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mr();case 2:if(n=t.sent){t.next=6;break}return alert("Belum ada langganan yang aktif."),t.abrupt("return");case 6:return t.prev=6,e=n.toJSON(),r=e.endpoint,o=O(),t.next=11,k.unsubscribePushNotification(o,r);case 11:if(!t.sent.error){t.next=15;break}return alert("Gagal menghapus langganan dari server."),t.abrupt("return");case 15:return t.next=17,n.unsubscribe();case 17:alert("Langganan notifikasi berhasil dihentikan."),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(6),alert("Terjadi kesalahan saat unsubscribe."),console.error(t.t0);case 24:case"end":return t.stop()}}),t,null,[[6,20]])})))).apply(this,arguments)}function Yr(t){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(t)}function Kr(){var t=Zr(),n=t.m(Kr),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Vr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Kr=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new no(t,n)},AsyncIterator:Xr,async:function(t,n,e,o,a){return(r(n)?Qr:$r)(i(t),n,e,o,a)},keys:Jr,values:Vr}})()}function Vr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Yr(t)+" is not iterable")}function Jr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function $r(t,n,e,r,o){var i=Qr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Qr(t,n,e,r,o){return new Xr(Zr().w(t,n,e,r),o||Promise)}function Xr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof no?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(to(Xr.prototype),to(Xr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),to(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Zr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return to(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(to(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,to(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,to(l,"constructor",s),to(s,"constructor",c),c.displayName="GeneratorFunction",to(s,o,"GeneratorFunction"),to(l),to(l,o,"Generator"),to(l,r,(function(){return this})),to(l,"toString",(function(){return"[object Generator]"})),(Zr=function(){return{w:i,m:p}})()}function to(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}to=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){to(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},to(t,n,e,r)}function no(t,n){this.v=t,this.k=n}function eo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ro(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){eo(i,r,o,a,u,"next",t)}function u(t){eo(i,r,o,a,u,"throw",t)}a(void 0)}))}}function oo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,io(r.key),r)}}function io(t){var n=function(t){if("object"!=Yr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Yr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yr(n)?n:n+""}function ao(t,n,e){uo(t,n),n.set(t,e)}function uo(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function co(t,n){return t.get(fo(t,n))}function so(t,n,e){return t.set(fo(t,n),e),e}function fo(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var lo=new WeakMap,po=new WeakMap,yo=new WeakMap,vo=new WeakSet;function ho(){return mo.apply(this,arguments)}function mo(){return(mo=ro(Kr().mark((function t(){var n,e=this;return Kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("push-notification-tools"),t.next=3,Dr();case 3:t.sent?(n.innerHTML='<button id="unsubscribe-button">Unsubscribe</button>',document.getElementById("unsubscribe-button").addEventListener("click",(function(){Hr().finally((function(){return fo(vo,e,ho).call(e)}))}))):(n.innerHTML='<button id="subscribe-button">Subscribe</button>',document.getElementById("subscribe-button").addEventListener("click",(function(){Ur().finally((function(){return fo(vo,e,ho).call(e)}))})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const bo=function(){return t=function t(n){var e,r=this,o=n.navigationDrawer,i=n.drawerButton,a=n.content;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),uo(this,e=vo),e.add(this),ao(this,lo,null),ao(this,po,null),ao(this,yo,null),function(t,n){(n=io(n))in t?Object.defineProperty(t,n,{value:null,enumerable:!0,configurable:!0,writable:!0}):t[n]=null}(this,"_currentPage"),this.supportsViewTransitions="startViewTransition"in document,so(lo,this,a),so(po,this,i),so(yo,this,o),this._setupDrawer(),this._setupRouter(),fo(vo,this,ho).call(this),window.addEventListener("hashchange",(function(){r._renderPage(),_()})),_()},n=[{key:"_setupDrawer",value:function(){var t=this;co(po,this).addEventListener("click",(function(){co(yo,t).classList.toggle("open")})),document.body.addEventListener("click",(function(n){co(yo,t).contains(n.target)||co(po,t).contains(n.target)||co(yo,t).classList.remove("open"),co(yo,t).querySelectorAll("a").forEach((function(e){e.contains(n.target)&&co(yo,t).classList.remove("open")}))}))}},{key:"_setupRouter",value:function(){var t=this;window.addEventListener("hashchange",(function(){return t._renderPage()})),window.addEventListener("load",(function(){return t._renderPage()}))}},{key:"_renderPage",value:(e=ro(Kr().mark((function t(){var n,e,r,o,i,a,u,c=this;return Kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this._currentPage||"function"!=typeof this._currentPage.cleanup){t.next=4;break}return t.next=4,this._currentPage.cleanup();case 4:if(n=x(),r=N(e=xr[n]||xr["/"]),o=T(e),i=null!==r?r:null!==o?o:e){t.next=11;break}return t.abrupt("return");case 11:if(a=function(){var t=ro(Kr().mark((function t(){return Kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.render();case 3:return co(lo,c).innerHTML=t.sent,t.next=6,i.afterRender();case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn(" Halaman gagal dimuat:",t.t0),co(lo,c).innerHTML='\n        <section class="offline-fallback">\n          <h2>Oops! Kamu sedang offline</h2>\n          <p>Konten tidak dapat dimuat. Silakan periksa koneksi internet kamu.</p>\n        </section>\n      ';case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),!this.supportsViewTransitions){t.next=18;break}return u=document.startViewTransition(a),t.next=16,u.ready;case 16:t.next=20;break;case 18:return t.next=20,a();case 20:this._currentPage=i,t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),console.error("Error during page render:",t.t0),co(lo,this).innerHTML='\n    <section class="offline-fallback">\n      <h2>Kesalahan Tidak Terduga</h2>\n      <p>'.concat(t.t0.message,"</p>\n    </section>\n  ");case 27:case"end":return t.stop()}}),t,this,[[0,23]])}))),function(){return e.apply(this,arguments)})}],n&&oo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function wo(t){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(t)}function go(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function So(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ko(r.key),r)}}function ko(t){var n=function(t){if("object"!=wo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=wo(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wo(n)?n:n+""}var xo=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"addNewStream",value:function(t){Array.isArray(window.currentStreams)?window.currentStreams=[].concat(function(t){return function(t){if(Array.isArray(t))return go(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return go(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?go(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(window.currentStreams),[t]):window.currentStreams=[t]}},{key:"stopAllStreams",value:function(){Array.isArray(window.currentStreams)?window.currentStreams.forEach((function(t){t.active&&t.getTracks().forEach((function(t){return t.stop()}))})):window.currentStreams=[]}}],null&&So(t.prototype,null),n&&So(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function Oo(){var t=Go(),n=t.m(Oo),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,jo(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Oo=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Io(t,n)},AsyncIterator:No,async:function(t,n,e,o,a){return(r(n)?To:Eo)(i(t),n,e,o,a)},keys:Po,values:jo}})()}function jo(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(_o(t)+" is not iterable")}function Po(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Eo(t,n,e,r,o){var i=To(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function To(t,n,e,r,o){return new No(Go().w(t,n,e,r),o||Promise)}function No(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Io?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ao(No.prototype),Ao(No.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ao(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Go(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Ao(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&y(f,v),u=f,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Ao(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ao(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Ao(l,"constructor",s),Ao(s,"constructor",c),c.displayName="GeneratorFunction",Ao(s,o,"GeneratorFunction"),Ao(l),Ao(l,o,"Generator"),Ao(l,r,(function(){return this})),Ao(l,"toString",(function(){return"[object Generator]"})),(Go=function(){return{w:i,m:p}})()}function Ao(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ao=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ao(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ao(t,n,e,r)}function Io(t,n){this.v=t,this.k=n}function Fo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Lo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Fo(i,r,o,a,u,"next",t)}function u(t){Fo(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",Lo(Oo().mark((function t(){var n,e,r,o,i,a;return Oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new bo({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")}),t.next=3,n._renderPage();case 3:if(e=document.querySelector("#main-content"),(r=document.querySelector(".skip-link")).addEventListener("click",(function(t){t.preventDefault(),r.blur(),e.setAttribute("tabindex","-1"),e.focus(),e.scrollIntoView(),setTimeout((function(){e.removeAttribute("tabindex")}),1e3)})),window.addEventListener("hashchange",Lo(Oo().mark((function t(){return Oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return xo.stopAllStreams(),t.next=3,n._renderPage();case 3:case"end":return t.stop()}}),t)})))),!("serviceWorker"in navigator)){t.next=28;break}return t.prev=8,t.next=11,navigator.serviceWorker.register("/sw.js");case 11:if(o=t.sent,console.log(" Service Worker terdaftar:",o),!o){t.next=23;break}return t.next=16,Ur();case 16:if(i=t.sent,console.log(" Subscription:",i),!(a=O())||!i){t.next=23;break}return t.next=22,k.subscribePushNotification(a,i);case 22:console.log(" Push subscription dikirim ke server");case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(8),console.error(" Gagal mendaftar SW/Push:",t.t0);case 28:case"end":return t.stop()}}),t,null,[[8,25]])}))))})();